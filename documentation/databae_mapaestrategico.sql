/*
DB name: mapaestrategico
*/

CREATE TABLE IF NOT EXISTS `PERSPECTIVAS` (
  `idPERSPECTIVA` INT NOT NULL AUTO_INCREMENT,
  `TIPO_PERSP` VARCHAR(20) NULL,
  `SITUACAO_PERSP` VARCHAR(10) NULL,
  `DESCRICAO_PERSP` VARCHAR(50) NULL,
  PRIMARY KEY (`idPERSPECTIVA`))
ENGINE = InnoDB

CREATE TABLE IF NOT EXISTS `GRUPOS` (
  `idGRUPO` INT NOT NULL AUTO_INCREMENT,
  `CATEGORIA` VARCHAR(100) NULL,
  `PERSPECTIVAS_idPERSPECTIVA` INT NOT NULL,
  `SITUACAO_GR` VARCHAR(10) NULL,
  PRIMARY KEY (`idGRUPO`),
  INDEX `fk_GRUPOS_PERSPECTIVAS_idx` (`PERSPECTIVAS_idPERSPECTIVA` ASC),
  CONSTRAINT `fk_GRUPOS_PERSPECTIVAS`
    FOREIGN KEY (`PERSPECTIVAS_idPERSPECTIVA`)
    REFERENCES `PERSPECTIVAS` (`idPERSPECTIVA`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDBB

CREATE TABLE IF NOT EXISTS `OBJETIVOS` (
  `idOBJETIVO` INT NOT NULL AUTO_INCREMENT,
  `DESCRICAO_OBJ` VARCHAR(100) NULL,
  `GRUPOS_idGRUPO` INT NOT NULL,
  `SITUACAO_OBJ` VARCHAR(10) NULL,
  PRIMARY KEY (`idOBJETIVO`),
  INDEX `fk_OBJETIVOS_GRUPOS1_idx` (`GRUPOS_idGRUPO` ASC),
  CONSTRAINT `fk_OBJETIVOS_GRUPOS1`
    FOREIGN KEY (`GRUPOS_idGRUPO`)
    REFERENCES `GRUPOS` (`idGRUPO`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB

CREATE TABLE IF NOT EXISTS `PROJETOS` (
  `idPROJETO` INT NOT NULL AUTO_INCREMENT,
  `NOME_PROJ` VARCHAR(100) NULL,
  `DATA_INI` DATE NULL,
  `DATA_FIM` DATE NULL,
  `GERENTE` VARCHAR(80) NULL,
  `OBJETIVOS_idOBJETIVO` INT NOT NULL,
  `SITUACAO_PROJ` VARCHAR(10) NULL,
  PRIMARY KEY (`idPROJETO`),
  INDEX `fk_PROJETO_OBJETIVOS1_idx` (`OBJETIVOS_idOBJETIVO` ASC),
  CONSTRAINT `fk_PROJETO_OBJETIVOS1`
    FOREIGN KEY (`OBJETIVOS_idOBJETIVO`)
    REFERENCES `OBJETIVOS` (`idOBJETIVO`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB


CREATE TABLE IF NOT EXISTS `INDICADORES` (
  `idINDICADORES` INT NOT NULL AUTO_INCREMENT,
  `OBJETIVOS_idOBJETIVO` INT NOT NULL,
  `SITUACAO_IND` VARCHAR(45) NULL,
  `DESCRICAO_IND` VARCHAR(45) NULL,
  PRIMARY KEY (`idINDICADORES`),
  INDEX `fk_INDICADORES_OBJETIVOS1_idx` (`OBJETIVOS_idOBJETIVO` ASC),
  CONSTRAINT `fk_INDICADORES_OBJETIVOS1`
    FOREIGN KEY (`OBJETIVOS_idOBJETIVO`)
    REFERENCES `OBJETIVOS` (`idOBJETIVO`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
   

CREATE TABLE IF NOT EXISTS `METAS` (
  `INDICADORES_idINDICADORES` INT NOT NULL AUTO_INCREMENT,
  `idMETAS` INT NOT NULL,
  `SITUACAO_MET` VARCHAR(10) NULL,
  `DESCRICAO_MET` VARCHAR(100) NULL,
  `UNIDADE` VARCHAR(15) NULL,
  `VERMELHO_INI` INT NULL,
  `VERMELHO_LIM` INT NULL,
  `AMARELO_INI` INT NULL,
  `AMARELO_LIM` INT NULL,
  `VERDE` INT NULL,
  `ANO` INT NULL,
  INDEX `fk_METAS_INDICADORES1_idx` (`INDICADORES_idINDICADORES` ASC),
  PRIMARY KEY (`idMETAS`),
  CONSTRAINT `fk_METAS_INDICADORES1`
    FOREIGN KEY (`INDICADORES_idINDICADORES`)
    REFERENCES `INDICADORES` (`idINDICADORES`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB

CREATE TABLE IF NOT EXISTS `MAPAS` (
  `idME` INT NOT NULL AUTO_INCREMENT,
  `OBJETIVOS_idOBJETIVO` INT NOT NULL,
  `SITUACAO_ME` VARCHAR(10) NULL,
  `MISSAO` VARCHAR(400) NULL,
  `VISAO` VARCHAR(400) NULL,
  `ANO` INT NULL,
  INDEX `fk_MAPAESTRATÉGICO_OBJETIVOS1_idx` (`OBJETIVOS_idOBJETIVO` ASC),
  PRIMARY KEY (`idME`),
  CONSTRAINT `fk_MAPAESTRATÉGICO_OBJETIVOS1`
    FOREIGN KEY (`OBJETIVOS_idOBJETIVO`)
    REFERENCES `OBJETIVOS` (`idOBJETIVO`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
  
CREATE TABLE IF NOT EXISTS `ITENS` (
  `idITENS` INT NOT NULL AUTO_INCREMENT,
  `ME_idME` INT NOT NULL,
  `PERSPECTIVAS_idPERSPECTIVA` INT NULL,
  `GRUPO_idGRUPO` INT NULL,
  `OBJETIVOS_idOBJETIVO` INT NULL,
  `INDICADORES_idINDICADORES` INT NULL,
  PRIMARY KEY (`idITENS`),
  INDEX `fk_INTENS_ME_MAPAESTRATEGICO1_idx` (`ME_idME` ASC),
  CONSTRAINT `fk_INTENS_ME_MAPAESTRATEGICO1`
    FOREIGN KEY (`ME_idME`)
    REFERENCES `MAPAS` (`idME`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB

CREATE TABLE IF NOT EXISTS `IMPORTACOES` (
  `idIMPORTACAO` INT NOT NULL AUTO_INCREMENT,
  `ITENS_idITENS` INT NOT NULL,
  `INDICADORES_idINDICADORES` INT NULL,
  `UNIDADE` VARCHAR(10) NULL,
  `DATA` DATE NULL,
  `VALOR` VARCHAR(15) NULL,
  PRIMARY KEY (`idIMPORTACAO`),
  INDEX `fk_IMPORTACAO_ITENS1_idx` (`ITENS_idITENS` ASC),
  CONSTRAINT `fk_IMPORTACAO_ITENS1`
    FOREIGN KEY (`ITENS_idITENS`)
    REFERENCES `ITENS` (`idITENS`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB

    